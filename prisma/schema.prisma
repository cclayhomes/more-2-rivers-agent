generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Draft {
  id              Int       @id @default(autoincrement())
  draftId         String    @unique
  dateFound       DateTime
  type            String
  headline        String
  bullets         String
  localContext    String
  sourceUrl       String
  sourceName      String
  status          String    @default("QUEUED")
  postedAt        DateTime?
  facebookPostId  String?
  urlHash         String
  titleHash       String
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt

  @@index([status])
  @@index([urlHash, titleHash])
}


model MarketHistory {
  id               Int      @id @default(autoincrement())
  community        String
  weekDate         DateTime
  activeCount      Int
  pendingCount     Int
  soldLast30       Int
  medianSold       Int
  avgDom           Int
  newListingsCount Int?
  createdAt        DateTime @default(now())

  @@unique([community, weekDate])
}
